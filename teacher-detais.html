<!doctype html>
<html lang="en">

<head>
    <title>Kido-Teacher-Store</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body>


    <header id="header-wrap">

        <nav class="navbar navbar-expand-lg navbar-light bg-color fixed-top py-2">
            <div class="container">
                <a href="index.html" class="navbar-brand"><img src="images/head-img.png" width="250" alt="Responsive image"></a>

                <div class=" navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto w-100 justify-content-end clearfix">
                      <li class="nav-item home_nav active pl-4"><a class="nav-link" href="teacher-detais.html"><i class="fas fa-user-circle"></i> Profile Details</a></li>
                        <li class="nav-item home_nav active pl-4"><a class="nav-link logged-user"></a></li>
                        <li class="nav-item home_nav active px-4"><a class="nav-link logout">logout</a></li>
                    </ul>
                </div>
                <div class="add-to-cart">
                    <a href="cart.html" class="href"><div class="cart icon1">
                        <i class="fas fa-shopping-cart">
                        <span class="cart-count">0</span></i><br>
                        <span class="text-white">&#8377; &nbsp;</span><span class="cart_amount text-white">0</span>
                    </div></a>
                </div>
            </div>
        </nav>

    </header>

  <section class="teacher-details py-5" id="cart-list1">
      <div class="container">
        <div id="spinner"></div>
          <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="border bg-white p-5">
                        <h2 class="t-text pb-3">Profile Details</h2>
                    <form id="validate" enctype="multipart/form-data">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="name">Name</label>
                                <input type="text" class="form-control" id="name" name="name" placeholder="Enter Your Name">
                            </div>
                            <div class="form-group col-md-6">
                              <label for="contact">Contact</label>
                              <input type="number" class="form-control" id="contact" name="contact"  placeholder="Enter Your Contact Number">
                            </div>
                        </div>   
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="upload_aadhar">Adhar Card Image <small class="text-warning">Note: image should be in png or jpg</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="upload_aadhar" id="upload_aadhar">
                                <label class="custom-file-label" for="upload_aadhar">Upload Adhar Card</label>
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="upload_cv">CV File <small class="text-warning">Note: file should be in Pdf</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="upload_cv" id="upload_cv">
                                <label class="custom-file-label" for="upload_cv">Upload CV</label>
                                </div>
                            </div>
                        </div> 
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="upload_image">Profile Picture <small class="text-warning">Note: image should be in png or jpg</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="upload_image" id="upload_image">
                                <label class="custom-file-label" for="upload_image">Upload Profile Picture</label>
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="police_verification">Police verification <small class="text-warning">Note: image should be in png or jpg</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="police_verification" id="police_verification">
                                <label class="custom-file-label" for="police_verification">Upload Police verification</label>
                                </div>
                            </div>
                        </div>  
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="place_image1">POD Image1 <small class="text-warning">Note: image should be in png or jpg</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="place_image1" id="place_image1">
                                <label class="custom-file-label" for="place_image1">Upload PDO Image1</label>
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="place_image2">POD Image2 <small class="text-warning">Note: image should be in png or jpg</small></label>
                                <div class="custom-file">
                                <input type="file" class="custom-file-input" name="place_image2" id="place_image2">
                                <label class="custom-file-label" for="place_image2">Upload PDO Image2</label>
                                </div>
                            </div>
                        </div> 
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="address1">Address Line 1</label>
                                <input type="text" class="form-control" id="address1" name="address1" placeholder="Enter Your Address Line 1">
                            </div>
                            <div class="form-group col-md-6">
                              <label for="address2">Address Line 2</label>
                              <input type="text" class="form-control" id="address2" name="address2"  placeholder="Enter Your Address Line 2">
                            </div>
                        </div>   
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="stateselect">Select State</label>
                                <select name="state" value="" class="form-control state" id="state" >
                                    <option value="">Select any state</option>
                                    <option value="1">ANDHRA PRADESH</option>
                                    <option value="2">ASSAM</option>
                                    <option value="3">ARUNACHAL PRADESH</option>
                                    <option value="4">BIHAR</option>
                                    <option value="5">GUJRAT</option>
                                    <option value="6">HARYANA</option>
                                    <option value="7">HIMACHAL PRADESH</option>
                                    <option value="8">JAMMU &amp; KASHMIR</option>
                                    <option value="9">KARNATAKA</option>
                                    <option value="10">KERALA</option>
                                    <option value="11">MADHYA PRADESH</option>
                                    <option value="12">MAHARASHTRA</option>
                                    <option value="13">MANIPUR</option>
                                    <option value="14">MEGHALAYA</option>
                                    <option value="15">MIZORAM</option>
                                    <option value="16">NAGALAND</option>
                                    <option value="17">ORISSA</option>
                                    <option value="18">PUNJAB</option>
                                    <option value="19">RAJASTHAN</option>
                                    <option value="20">SIKKIM</option>
                                    <option value="21">TAMIL NADU</option>
                                    <option value="22">TRIPURA</option>
                                    <option value="23">UTTAR PRADESH</option>
                                    <option value="24">WEST BENGAL</option>
                                    <option value="25">DELHI</option>
                                    <option value="26">GOA</option>
                                    <option value="27">PONDICHERY</option>
                                    <option value="28">LAKSHDWEEP</option>
                                    <option value="29">DAMAN &amp; DIU</option>
                                    <option value="30">DADRA &amp; NAGAR</option>
                                    <option value="31">CHANDIGARH</option>
                                    <option value="32">ANDAMAN &amp; NICOBAR</option>
                                    <option value="33">UTTARANCHAL</option>
                                    <option value="34">JHARKHAND</option>
                                    <option value="35">CHATTISGARH</option>
                                </select>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="cityselect">Select City</label>
                                <select name="city" value="" class="form-control city" id="city">
                                    <option value="">Select any city</option>
                                 </select>
                            </div>
                        </div>  
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="area">Post Code</label>
                                <input type="text" class="form-control" id="area" name="area" placeholder="Enter Your Post Code">
                            </div>
                            <div class="form-group col-md-6">
                              <label for="position_of_teacher">Position </label>
                              <input type="number" class="form-control" id="position_of_teacher" name="position_of_teacher"  placeholder="Enter Your Position">
                            </div>
                        </div>  
                        <div class="form-group">
                            <label for="about_teacher">About</label>
                            <textarea type="text" class="form-control" id="about_teacher" name="about_teacher" placeholder="Enter about_teacher"></textarea>
                        </div>
                        
                        <button type="submit" id="form_submit" class="btn btn-primary">Submit</button>
                      </form>
                    </div>
                </div>
          </div>
      </div>
  </section>

    <!-- footer start -->
    <footer>

    </footer>
    <!-- footer end -->

    <button onclick="topFunction()" id="myBtn" title="Go to top" class="topbtn shadow px-3 py-2 rounded"><i class="fa fa-angle-up"></i></button>
 <!-- Optional JavaScript -->
 <!-- jQuery first, then Popper.js, then Bootstrap JS -->
 <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
 <script src="js/bootstrap.bundle.min.js"></script>

  <script src="https://jqueryvalidation.org/files/dist/jquery.validate.min.js"></script>
  <script src="https://jqueryvalidation.org/files/dist/additional-methods.min.js"></script>
  <script src="common.js"></script>
 <script>

var server = ((document.location.host).indexOf("localhost") !== -1) ? "http://localhost/apis/api.php" : "https://shop.kidovillage.com/kvshop_api/api.php";

//On select change get city data
$('#state').on('change', function () {
  $('#city').html('<option value="">Select any city</option>');
  var form = new FormData();
    form.append("api", "get_city_by_state");
    form.append("filter", "{\"state_id\":"+$("#state").val()+"}");
     $.ajax({
        "url": server,
        "method": "POST",
        "timeout": 0,
        "processData": false,
        "mimeType": "multipart/form-data",
        "contentType": false,
        "data": form,
       success: function(response){
        //  console.log(response);
           var options = '<option value="">Select any city</option>';
           $.each( JSON.parse(response) , function( x, vals ) {
             options += '<option value="' + vals.id + '">' + vals.name + '</option>';
           });
           $('#city').html(options);
            var city_id  =  $('#city').attr('data-id');
            if(city_id != undefined){
           $('#city').val(city_id);
           }
       }
     });
});
            

     $(document).ready(function() {

        $("#validate").validate({
                rules:{
                    name:{
                        required:true,
                    },
                    contact: {
                        digits: true,
                        minlength: 10,
                        maxlength: 10
                    }, 
                    about_teacher:{
                        required:true,
                    },               
                    upload_aadhar:{
                        required:true,
                        extension: "png|jpg"
                    },   
                    upload_cv:{
                        required:true,
                        extension: "pdf|doc"
                    },  
                    place_image1:{
                        extension: "png|jpg",
                    },   
                    place_image2:{
                        extension: "png|jpg",
                    }, 
                    upload_image:{
                        extension: "png|jpg",
                    },   
                    police_verification:{
                        extension: "png|jpg",
                    }, 
                },

                messages:{
                    name:{
                        required:"This field is required",
                    },
                    contact: {
                        digits: "Please enter a valid contact number",
                        minlength: "Please enter 10 digits only",
                        maxlength: "Please enter 10 digits only"
                    },
                    about_teacher:{
                        required:"This field is required",
                    },
                    upload_aadhar:{
                        required:"This field is required",
                        extension:"Please enter a image with png or jpg extension"
                    },
                    upload_cv:{
                        required:"This field is required",
                        extension:"Please enter a image with pdf extension"
                    },
                    place_image1:{
                        extension:"Please enter a image with png or jpg extension",
                    },
                    place_image2:{
                        extension:"Please enter a image with png or jpg extension",
                    },
                    upload_image:{
                        extension:"Please enter a image with png or jpg extension",
                    },
                    police_verification:{
                        extension:"Please enter a image with png or jpg extension",
                    },
                }
        });

        $('#upload_aadhar').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

            $('#upload_cv').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

            $('#place_image1').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

            $('#place_image2').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

            $('#upload_image').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

            $('#police_verification').on('change',function(){
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                var current_path = fileName.split("\\").pop();
                $(this).next('.custom-file-label').html(current_path);
            })

    });


    // On Load
    $(function () {
    'use strict';
    
    $('#form_submit').on('click', function (event) {
        var data;
        
        event.stopPropagation();
        event.preventDefault();
        var form = new FormData();
        form.append("api", "upload_file");
        $("#upload_aadhar")[0].files.length ? form.append("aadhar", $("#upload_aadhar")[0].files[0]) : false;
        $("#upload_cv")[0].files.length ? form.append("CV", $("#upload_cv")[0].files[0]) : false;
        $("#place_image1")[0].files.length ? form.append("place_image_1", $("#place_image1")[0].files[0]) : false;
        $("#place_image2")[0].files.length ? form.append("place_image_2", $("#place_image2")[0].files[0]) : false;
        $("#upload_image")[0].files.length ? form.append("image", $("#upload_image")[0].files[0]) : false;
        $("#police_verification")[0].files.length ? form.append("police_verification", $("#police_verification")[0].files[0]) : false;
        var user = local_get('user');
        form.append("id", user[0].id);
        form.append("name", $("#name").val());
        form.append("contact", $("#contact").val());
        form.append("address1", $("#address1").val());
        form.append("address2", $("#address2").val());
        form.append("state", $("#state").val());
        form.append("city", $("#city").val());
        form.append("area", $("#area").val());
        form.append("position_of_teacher", $("#position_of_teacher").val());
        form.append("about_teacher", $("#about_teacher").val());
        form.append("email", user[0].email);

        var settings = {
        "url": server,
        "method": "POST",
        "timeout": 0,
        "processData": false,
        "mimeType": "multipart/form-data",
        "contentType": false,
        "data": form,
        success: function (response) {
            window.location = "thankyou-msg.html";
            // alert("completed");
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
        }
        };

        $.ajax(settings);

    });
    
});


</script>
 </body>

 </html>
